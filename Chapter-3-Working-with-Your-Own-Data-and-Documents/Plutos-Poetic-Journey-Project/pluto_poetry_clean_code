#!/usr/bin/env python
# coding: utf-8

# # Programming Assignment: Pluto's Poetic Journey ğŸš€ å†¥ç‹æ˜Ÿè¯—æ„ä¹‹æ—…ç¼–ç¨‹ä½œä¸š

import test_your_code
from helper_functions import get_llm_response, print_formatted_list, print_formatted_list_of_dict, download_file

# <a name='1'></a>
# ## Exercise 1: Encountering Data - Reading the News Article ğŸ›°ï¸ ç»ƒä¹ 1ï¼šé‡åˆ°æ•°æ® - é˜…è¯»æ–°é—»æ–‡ç« 

# Define function to read article from file å®šä¹‰ä»æ–‡ä»¶è¯»å–æ–‡ç« çš„å‡½æ•°
def read_article(text_file):
    f = open(text_file, "r")
    contents = f.read()
    f.close()
    return contents

# Test Exercise 1
test_your_code.exercise_1(read_article)

# <a name='2'></a>
# ## Exercise 2: Decoding the Cosmos - Extracting Key Topics ğŸ”­ ç»ƒä¹ 2ï¼šè§£ç å®‡å®™ - æå–å…³é”®ä¸»é¢˜

# Read and display news article è¯»å–å¹¶æ˜¾ç¤ºæ–°é—»æ–‡ç« 
news_article = read_article("news_article.txt")
print(news_article)

# Use LLM to extract key topics ä½¿ç”¨LLMæå–å…³é”®ä¸»é¢˜
prompt = f"""
Read the contents of file {news_article}, and extract the key topics discussed in it. Provide exactly 3 key topics.
Each topic should not be more than 8 words.

Provide each topic in a new line.

Output Format:
topic_1

topic_2

topic_3

"""
response = get_llm_response(prompt)
print(response)

# Create list of key topics åˆ›å»ºå…³é”®ä¸»é¢˜åˆ—è¡¨
key_topics = [
    "Pluto's geological activity and features",
    "New Horizons' discoveries and insights",
    "Future Kuiper Belt Object exploration plans"
]

print_formatted_list(key_topics)

# Test Exercise 2
test_your_code.exercise_2(key_topics)

# <a name='3'></a>
# ## Exercise 3: The Poet's Palette - Organizing Your Topics ğŸ¨ ç»ƒä¹ 3ï¼šè¯—äººçš„è°ƒè‰²æ¿ - ç»„ç»‡ä¸»é¢˜

# Create list of dictionaries with usage flags åˆ›å»ºå¸¦æœ‰ä½¿ç”¨æ ‡å¿—çš„å­—å…¸åˆ—è¡¨
topics_to_use = [
    {
        "Topic 1": "Pluto's geological activity and features",
        "to_use": False
    },
    {
        "Topic 2": "New Horizons' discoveries and insights",
        "to_use": True
    },
    {
        "Topic 3": "Future Kuiper Belt Object exploration plans",
        "to_use": True
    }
]

print_formatted_list_of_dict(topics_to_use)

# Test Exercise 3
test_your_code.exercise_3(topics_to_use, key_topics)

# <a name='4'></a>
# ## Exercise 4: Cosmic Sonnets - Writing Your Space Poem ğŸ–‹ï¸ ç»ƒä¹ 4ï¼šå®‡å®™åå››è¡Œè¯— - æ’°å†™å¤ªç©ºè¯—

# Create prompt for poem generation åˆ›å»ºç”¨äºç”Ÿæˆè¯—æ­Œçš„æç¤º
prompt = f"""
write a poem, the poem should be of exactly 4 lines from {topics_to_use} 
"""

print(prompt)

# Test Exercise 4
test_your_code.exercise_4(prompt, topics_to_use)

# Generate and display poem ç”Ÿæˆå¹¶æ˜¾ç¤ºè¯—æ­Œ
poem = get_llm_response(prompt)
print(poem)

# <a name='5'></a>
# ## Exercise 5: Preserving the Verse - Saving Your Poem ğŸ’¾ ç»ƒä¹ 5ï¼šä¿å­˜è¯—å¥ - ä¿å­˜è¯—æ­Œ

# Define function to save poem to file å®šä¹‰å°†è¯—æ­Œä¿å­˜åˆ°æ–‡ä»¶çš„å‡½æ•°
def save_to_file(contents_to_save):
    f = open("poem.txt", 'w')
    f.write(contents_to_save)
    f.close()

# Test Exercise 5
test_your_code.exercise_5(save_to_file)

# Save poem to file å°†è¯—æ­Œä¿å­˜åˆ°æ–‡ä»¶
save_to_file(poem)

# Optional file download å¯é€‰æ–‡ä»¶ä¸‹è½½
download_file()